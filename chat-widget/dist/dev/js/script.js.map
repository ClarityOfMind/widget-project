{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/normalize.css/normalize.css","webpack:///./src/css/style.css","webpack:///./src/js/index.js","webpack:///./src/js/widget/CreateElement.js","webpack:///./src/js/widget/RandomMessage.js","webpack:///./src/js/widget/widget.js"],"names":["widget","Widget","init","CreateElement","divBody","user","text","divMsg","document","createElement","className","innerHTML","RandomMessage","lengthArray","rand","Math","random","round","randomMessage","сreateElement","getElem","id","getElementById","eventOpenChat","chatOpen","chatId","classList","remove","chatIdHead","removeEventListener","chatIdClose","addEventListener","eventCloseChat","messageArray","length","setTimeout","createMessage","showMessage","push","name","msg","console","log","add","getMessage","createdElem","appendChild","replyAi","msgText","arrayMesgAi","scrollBodyMessage","scrollTop","scrollHeight","onlineUser","userReply","window","sendMessage","e","keyCode","preventDefault","value"],"mappings":"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","file":"js/script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/index.js\");\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","'use strict';\r\n\r\nimport 'normalize.css';\r\nimport '../css/style.css';\r\n\r\nimport Widget from './widget/widget';\r\n\r\nlet widget = new Widget;\r\nwidget.init();\r\n\r\n","'use strict';\r\n\r\nexport default class CreateElement {\r\n\r\n    createBody(){\r\n        // Создаю <div> тела \r\n        let divBody = '';\r\n    }\r\n    \r\n    // Создание html блока сообщения\r\n    createMessage(user, text){\r\n\r\n        // Создаю <div>\r\n        let divMsg = document.createElement('div');\r\n\r\n        /**\r\n         * Условия от кого сообщение (true/false)\r\n         * взависимости от кого, добаляю разные css классы\r\n         */ \r\n        if(user){\r\n            divMsg.className = 'spchat__massage spchat__massage--user';\r\n        } else {\r\n            divMsg.className = 'spchat__massage spchat__massage--manager';\r\n        }\r\n\r\n        // В дочерний <div> вставляю текст сообщения\r\n        divMsg.innerHTML = text;\r\n        \r\n        return divMsg;\r\n    }\r\n}","'use strict';\r\n\r\nexport default class RandomMessage{\r\n\r\n    random(lengthArray){\r\n        let rand = 0 - 0.5 + Math.random() * (lengthArray - 0 + 1)\r\n        rand = Math.round(rand);\r\n        // Если ссгенерировано -0, тогда присваеваем 0\r\n        if (rand === -0) rand = 0;\r\n\r\n        return rand;\r\n    }\r\n\r\n}\r\n\r\n","'use strict';\r\n\r\nimport RandomMessage from './RandomMessage';\r\nimport CreateElement from './CreateElement';\r\n\r\nexport default class Widget {\r\n\r\n    init(){\r\n\r\n        // Класс генерации чисел \r\n        let randomMessage = new RandomMessage;\r\n\r\n        // Класс создания html элементов\r\n        let сreateElement = new CreateElement;\r\n        \r\n        // Упрощаю поиск элемента\r\n        function getElem(id) {\r\n            return document.getElementById(id);\r\n        }\r\n\r\n        function eventOpenChat() {\r\n            // проверка, открыт ли чат\r\n            if (!chatOpen) {\r\n\r\n                //удаляю класс\r\n                chatId.classList.remove('spchat-hidden');\r\n\r\n                // меняю флаг на открыт\r\n                chatOpen = true;\r\n\r\n                // удаляю прослушку события по header чата\r\n                chatIdHead.removeEventListener('click', eventOpenChat);\r\n\r\n                // вешаю прослушку события на кпонку закрытие\r\n                chatIdClose.addEventListener('click', eventCloseChat);\r\n\r\n                if (messageArray.length === 0) {\r\n                    setTimeout(function(){\r\n                    \r\n                    let divMsg = сreateElement.createMessage(false, 'Здравствуйте! Чем я могу вам помочь?');\r\n                    \r\n                    // Показываю сообщение\r\n                    showMessage(divMsg);\r\n\r\n                    // Добавляю в массив сообщение\r\n                    messageArray.push({name: 'manager', msg: 'Здравствуйте! Чем я могу вам помочь?'})\r\n                    }, 700);\r\n\r\n                }\r\n\r\n            console.log('Open')\r\n            }\r\n        }\r\n\r\n        function eventCloseChat() {\r\n            // проверка, открыт ли чат\r\n            if (chatOpen) {\r\n\r\n                //Добавляю класс\r\n                chatId.classList.add('spchat-hidden');\r\n\r\n                // меняю флаг на закрыт\r\n                chatOpen = false;\r\n\r\n                // удаляю прослушку события на кпонку закрытие\r\n                chatIdClose.removeEventListener('click', eventCloseChat);;\r\n\r\n                // вешаю прослушку события по header чата\r\n                chatIdHead.addEventListener('click', eventOpenChat);\r\n\r\n                console.log('Close')\r\n            }\r\n        }\r\n\r\n        function getMessage(){\r\n\r\n        }\r\n\r\n        function showMessage(createdElem){\r\n            // Поиск элемента куда вставить \r\n            let divMsg = getElem('spchat__massages');\r\n\r\n            // Вставляю в конец всех элементов в родителе\r\n            divMsg.appendChild(createdElem);\r\n        }\r\n\r\n        function replyAi(){\r\n            setTimeout(function(){\r\n                // генерирую случайное число, по которому выбираю сообщение из массива\r\n                let msgText = arrayMesgAi[ randomMessage.random(arrayMesgAi.length-1) ]; \r\n             \r\n                // создаю HTML сообщения\r\n                let msg = сreateElement.createMessage(false, msgText);\r\n\r\n                // показываю \r\n                showMessage(msg);\r\n\r\n                // Добавляю в массив сообщение\r\n                messageArray.push({name: 'manager', msg: msgText})\r\n\r\n                // Автопрокрутка скролла\r\n                let scrollBodyMessage = getElem('spchat__body');\r\n                scrollBodyMessage.scrollTop = scrollBodyMessage.scrollHeight;\r\n\r\n            }, 1000)\r\n\r\n        }\r\n        /**************START******************/\r\n\r\n        // Флаг online\r\n        let onlineUser = false;\r\n\r\n        // Флаг, чат открыт/закрыт\r\n        let chatOpen = false;\r\n\r\n        // Флаг, ответа пользователя\r\n        let userReply = false;\r\n\r\n        //\r\n        let messageArray = [];\r\n\r\n        // Временный массив ответов менеджера\r\n        let arrayMesgAi = [\r\n            ' Как к Вам обращаться ',\r\n            ' Мне необходимо время на уточнение информации ',\r\n            ' Пока жду ответа от руководства, могу рассказать анекдот ',\r\n            ' Одну минуту, пожайлуста ',\r\n            ' Время ожидания ответа истекло. Попробуйте обратиться позже ',\r\n            ' Сообщите свой e-mail, я на него позже отвечу',\r\n            ' Как с Вам связаться?',\r\n            ' Прошу Вас подождать, я отвечу через несколько минут '\r\n        ]\r\n\r\n        // Выбор чата для добавления класса \r\n        let chatId = getElem('spchat');\r\n\r\n        // Выбор кнопки закрыть для закрытия чата \r\n        let chatIdClose = getElem('spchat__close');\r\n\r\n        // Выбор header чата\r\n        let chatIdHead = getElem('spchat__header');\r\n\r\n        // Событие на загрузку документа\r\n        document.addEventListener('DOMContentLoaded', function(){\r\n            setTimeout(function(){\r\n                eventOpenChat();\r\n                console.log('setTimeout - ok') \r\n            }, 3500);\r\n\r\n            console.log('ready') \r\n        });\r\n\r\n        // Событие на активность документа\r\n        window.addEventListener(\"focus\", function() {\r\n\r\n            if (onlineUser) {\r\n            // Открыть чат автоматически по истечению 3,5с\r\n            setTimeout(function(){\r\n                eventOpenChat();\r\n                console.log('setTimeout - ok') \r\n            }, 4500);\r\n            }\r\n            \r\n            console.log('active') \r\n        });\r\n\r\n        // Событие на уход со страницы\r\n        window.addEventListener(\"blur\", function() {\r\n            onlineUser = true;\r\n        });\r\n\r\n        // Вешаю событие клик на header \r\n        chatIdHead.addEventListener('click', eventOpenChat);\r\n\r\n        // Устанавливаю событие на Enter в поле textarea\r\n        let sendMessage = getElem('sendMessage');\r\n\r\n        // Вешаю событиние на Enter\r\n        sendMessage.addEventListener('keydown', function(e){\r\n\r\n            // Если нажата кнопка Enter(13)\r\n            if (e.keyCode === 13) {\r\n                // Отменяю перенос строки, действие по умолчанию\r\n                e.preventDefault();\r\n\r\n                // Если сообщение пустое\r\n                if( this.value !== '') {\r\n\r\n                    // Создаю html разметку с собщением \r\n                    let msg = сreateElement.createMessage(true, this.value);\r\n                    // \r\n                    showMessage(msg);\r\n                    messageArray.push({name: 'user', msg: this.value})\r\n                \r\n                    // Ответа манагера\r\n                    replyAi();\r\n                }\r\n\r\n                // Автопрокрутка скролла\r\n                let scrollBodyMessage = getElem('spchat__body');\r\n                scrollBodyMessage.scrollTop = scrollBodyMessage.scrollHeight;\r\n\r\n                // Сбрасываю значение поля\r\n                sendMessage.value = '';\r\n\r\n            }\r\n        });\r\n    }\r\n}"],"sourceRoot":""}